{% extends 'base.html' %}

{% block content %}
<br>
<h3>Tables and chart</h3>
<div class="row mt-5">
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h4>Temperature Chart</h4>
                <canvas id="temperatureChart" width="400" height="250"></canvas>
                <script>
                    const temperatureLabels = {{ temperature_labels| safe }};
                    const temperatureData = {{ temperature_values| safe }};

                    const temperatureConfig = {
                        type: 'line',
                        data: {
                            labels: temperatureLabels,
                            datasets: [{
                                label: 'Temperature',
                                data: temperatureData,
                                fill: false,
                                borderColor: 'rgb(75, 192, 192)',
                                tension: 0.1
                            }]
                        }
                    };

                    const temperatureChart = new Chart(
                        document.getElementById('temperatureChart').getContext('2d'),
                        temperatureConfig
                    );
                </script>
            </div>
            <div class="col-md-12">
                <h4>Temperature Table</h4>
                <table class="table table-bordered table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Timestamp</th>
                            <th scope="col">Temperature</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for entry in temperature_data %}
                        <tr>
                            <td>{{ entry.timestamp|date:"H:i:s" }}</td>
                            <td>{{ entry.temperature }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h4>Current chart</h4>
                <canvas id="currentChart" width="400" height="250"></canvas>
                <script>
                    const currentLabels = {{ current_labels| safe }};
                    const currentData = {{ current_values| safe }};

                    const currentConfig = {
                        type: 'line',
                        data: {
                            labels: currentLabels,
                            datasets: [{
                                label: 'Current',
                                data: currentData,
                                fill: false,
                                borderColor: 'rgb(255, 159, 64)',
                                tension: 0.1
                            }]
                        }
                    };

                    const currentChart = new Chart(
                        document.getElementById('currentChart').getContext('2d'),
                        currentConfig
                    );
                </script>
            </div>
            <div class="col-md-12">
                <h4>Current Table</h4>
                <table class="table table-bordered table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Timestamp</th>
                            <th scope="col">Current</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for entry in current_data %}
                        <tr>
                            <td>{{ entry.timestamp|date:"H:i:s" }}</td>
                            <td>{{ entry.current }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<br>
<div class="row mt-5">
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h4>vibration Chart</h4>
                <canvas id="vibrationChart" width="400" height="250"></canvas>
                <script>
                    const vibrationLabels = {{ vibration_labels| safe }};
                    const vibrationData = {{ vibration_values| safe }};

                    const vibrationConfig = {
                        type: 'line',
                        data: {
                            labels: vibrationLabels,
                            datasets: [{
                                label: 'Vibration',
                                data: vibrationData,
                                fill: false,
                                borderColor: 'rgb(153, 102, 255)',
                                tension: 0.1
                            }]
                        }
                    };

                    const vibrationChart = new Chart(
                        document.getElementById('vibrationChart').getContext('2d'),
                        vibrationConfig
                    );
                </script>
            </div>
            <div class="col-md-12">
                <h4>Vibration Table</h4>
                <table class="table table-bordered table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Timestamp</th>
                            <th scope="col">Vibration</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for entry in vibration_data %}
                        <tr>
                            <td>{{ entry.timestamp|date:"H:i:s" }}</td>
                            <td>{{ entry.vibration }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
     <br>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <h4>Speed Chart</h4>
                <canvas id="speedChart" width="400" height="250"></canvas>
                <script>
                    const speedLabels = {{ speed_labels| safe }};
                    const speedData = {{ speed_values| safe }};

                    const speedConfig = {
                        type: 'line',
                        data: {
                            labels: speedLabels,
                            datasets: [{
                                label: 'Speed',
                                data: speedData,
                                fill: false,
                                borderColor: 'rgb(255, 99, 132)',
                                tension: 0.1
                            }]
                        }
                    };

                    const speedChart = new Chart(
                        document.getElementById('speedChart').getContext('2d'),
                        speedConfig
                    );
                </script>
            </div>
            <div class="col-md-12">
                <h4>Speed Table</h4>
                <table class="table table-bordered table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Timestamp</th>
                            <th scope="col">Speed</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for entry in speed_data %}
                        <tr>
                            <td>{{ entry.timestamp|date:"H:i:s" }}</td>
                            <td>{{ entry.speed }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% endblock %}
